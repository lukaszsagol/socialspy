var socialSpy={FACEBOOK_ON:"onfacebook",FACEBOOK_OFF:"offfacebook",GOOGLE_ON:"ongoogle",GOOGLE_OFF:"offgoogle",GPLUS_ON:"ongplus",GPLUS_OFF:"offgplus",TWITTER_ON:"ontwitter",TWITTER_OFF:"offtwitter",SEPARATOR:";",variableIndex:null,variableName:null,recievedStatuses:0,serviceStatuses:{},services:[],debug:!1,customSubmit:null,waitForLoad:!0,init:function(a){a==null&&(a={}),socialSpy.debug=!!a.debug,socialSpy.dbg("socialSpy init called with DEBUG"),socialSpy.dbg("DON'T USE DEBUG IN PRODUCTION"),_gaq=window._gaq||[],socialSpy.services=a.services||["facebook","twitter","google","gplus"],socialSpy.variableIndex=a.variableIndex||1,socialSpy.variableName=a.variableName||"Social Spy",socialSpy.waitForLoad=typeof a.waitForLoad=="undefined"?!0:a.waitForLoad,socialSpy.customSubmit=a.customSubmit,socialSpy.services.length>0?socialSpy.waitForLoad?socialSpy.listen(window,"load",socialSpy.installServices):socialSpy.installServices():socialSpy.dbg("No services selected."),window._gaq=_gaq||[]},installServices:function(){var a=0;for(a=0;a<socialSpy.services.length;a++)socialSpy.installers[socialSpy.services[a].toLowerCase()]()},installers:{facebook:function(){FB=window.FB||undefined,!FB||!FB._apiKey?(socialSpy.dbg("FB.init not called. Delaying status check..."),setTimeout(socialSpy.installers.facebook,100)):FB.getLoginStatus(function(a){a.status!="unknown"?socialSpy.handle("facebook",!0):socialSpy.handle("facebook",!1)})},twitter:function(){socialSpy.dbg("Checking Twitter status..."),socialSpy.installImageCheck("https://twitter.com/login?redirect_after_login=%2Fimages%2Fspinner.gif","twitter")},google:function(){socialSpy.dbg("Checking Google status..."),socialSpy.installImageCheck("https://accounts.google.com/CheckCookie?continue=https://www.google.com/intl/en/images/logos/accounts_logo.png","google")},gplus:function(){socialSpy.dbg("Checking GPlus status..."),socialSpy.installImageCheck("https://plus.google.com/up/?continue=https://www.google.com/intl/en/images/logos/accounts_logo.png&type=st&gpsrc=ogpy0","gplus")}},dbg:function(a){socialSpy.debug&&typeof console!="undefined"&&console.log(a)},handle:function(a,b){socialSpy.dbg("Recieved "+a+" status: "+(b?"logged in.":"not logged in.")),socialSpy.serviceStatuses[a]=b,socialSpy.recievedStatuses++,socialSpy.recievedStatuses==socialSpy.services.length&&(socialSpy.customSubmit?socialSpy.dbg("Calling custom submit method."):socialSpy.dbg("Calling default submit method."),(socialSpy.customSubmit||socialSpy.defaultSubmit)(socialSpy.serviceStatuses),socialSpy.dbg("socialSpy done his job. He disappears..."))},handleImageCheck:function(a,b){socialSpy.handle(a,b),document.body.removeChild(document.getElementById("socialSpy_"+a+"_imagecheck"))},defaultSubmit:function(a){var b=[],c=0;for(c=0;c<socialSpy.services.length;c++){var d=socialSpy.services[c],e=d.toUpperCase()+(a[d]?"_ON":"_OFF");b.push(socialSpy[e])}_gaq.push(["_setCustomVar",socialSpy.variableIndex,socialSpy.variableName,b.join(socialSpy.SEPARATOR),2])},installImageCheck:function(a,b){var c=document.createElement("img");c.setAttribute("onload","socialSpy.handleImageCheck('"+b+"', true)"),c.setAttribute("onerror","socialSpy.handleImageCheck('"+b+"', false)"),c.setAttribute("style","display: none;"),c.setAttribute("id","socialSpy_"+b+"_imagecheck"),c.setAttribute("src",a),document.body.appendChild(c)},listen:function(a,b,c){return a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent?a.attachEvent("on"+b,c):!1}};